<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <script type="text/javascript" src="scripts/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script type='text/javascript'>
        $(document).ready(function(){
            $( "#header" ).load( "header.html" );
            $( "#amenu" ).load( "tmenu.html" );
            $( "#footer" ).load( "footer.html" );
        });
    </script>
    <style>

    </style>
    <script>
        var data1;
        function fetch() {
            validate_teacher();
                var tid = sessionStorage.getItem("id");
                var tbl = document.getElementById("tbl");
                tbl.innerText = "";
                $.post("http://localhost:8080/attendance_war_exploded/global/timetable_services/viewTeacherWeekWise",
                    {param1: tid},
                    function (data) {
                        data1 = data;
                    });
                setTimeout(function () {
                    ctable();
                }, 3000);
        }
        function ctable() {
            if(data1=="")
            {
                var tbl = document.getElementById("tbl");
                tbl.innerText = "";
                alert("No schedule found...!!!")
            }
            else {
                var data=data1;
                // alert(JSON.stringify(data));
                var tbl = document.getElementById("tbl");
                tbl.innerText = "";
                var table = document.createElement('table');
                table.setAttribute("id","tble");
                table.className = "table table-bordered text-center";
                // table.style.border="border-color:green;";
                tbl.appendChild(table);

                var row1 = table.insertRow(0);
                // row1.className="border-info";
                var q = row1.insertCell(0);
                q.innerHTML = "<b>Sr.No.</b>";
                // q.className="border-right-0";
                q = row1.insertCell(1);
                // q.className="border-top border-bottom";
                q.innerHTML = "";
                q = row1.insertCell(2);
                // q.className="border-top border-bottom";
                q.innerHTML = "<b>MON</b>";
                q = row1.insertCell(3);
                q.innerHTML = "<b>TUE</b>";
                q = row1.insertCell(4);
                q.innerHTML = "<b>WED</b>";
                q = row1.insertCell(5);
                q.innerHTML = "<b>THU</b>";
                q = row1.insertCell(6);
                q.innerHTML = "<b>FRI</b>";
                q = row1.insertCell(7);
                q.innerHTML = "<b>SAT</b>";

                var srlen=data.length/6;
                var rw=1;
                var j=0;
                for(i=0;i<srlen;i++)
                {
                    var row1 = table.insertRow(rw++);
                    // row1.className="border-warning";
                    var row2 = table.insertRow(rw++);
                    var row3 = table.insertRow(rw++);
                    // row1.rowSpan = "3";
                    var q1 = row1.insertCell(0);
                    q1.innerText = i + 1;
                    // q1.className="rounded";
                    // q1.className="border-warning";
                    q1.rowSpan=3;
                    var q1 = row2.insertCell(0);
                    q1.innerText = "Subject/Lab Batch";
                    var q1 = row3.insertCell(0);
                    q1.innerText = "Slot No";

                    var q1 = row1.insertCell(1);
                    q1.innerText = "Class/Div";



                    for(var k=2;k<8;j++,k++)
                    {
                        if(data[j]["slotno"]=="-1")
                        {
                            var q1 = row1.insertCell(k);
                            q1.innerText = "";
                            var q1 = row2.insertCell(k-1);
                            q1.innerText = "-";
                            var q1 = row3.insertCell(k-1);
                            q1.innerText = "";
                        }
                        else if(data[j]["slotno"]=="0")
                        {
                            var q1 = row1.insertCell(k);
                            q1.innerText = data[j]["clname"];
                            var q1 = row2.insertCell(k-1);
                            q1.innerText = data[j]["lname"];
                            var q1 = row3.insertCell(k-1);
                            q1.innerText = "";
                        }
                        else
                        {
                            var q1 = row1.insertCell(k);
                            q1.innerText = data[j]["clname"];
                            var q1 = row2.insertCell(k-1);
                            q1.innerText = data[j]["sname"];
                            var q1 = row3.insertCell(k-1);
                            q1.innerText =data[j]["slotno"];
                        }
                    }
                }
            }
        }
    </script>
</head>
<title>Attendance Portal</title>
<body onload="fetch()">
<div class="container">
    <div id='header'></div>
    <div id='amenu'></div>

    <div class="row content">
        &nbsp
        <div class="container">
            <div class="row content1">

                <div class="col-sm-12 text-center">
                    <h4><label>Week Timetable</label></h4>
                    <form class="form-text text-left">
                        <div id="tbl">
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <div id='footer'></div>